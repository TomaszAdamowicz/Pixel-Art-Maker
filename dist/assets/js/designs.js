const erase=document.getElementById('button-erase'),pixelCanvas=document.getElementById('pixel-canvas'),height=document.getElementById('input-height'),width=document.getElementById('input-width'),modalAlert=document.querySelector('#modal-alert'),modal=document.getElementById('modal');let cells=document.getElementsByTagName('td'),grid={w:width.value,h:height.value,rulers:!0,makeGrid:(a,b)=>{let c=1;for(pixelCanvas.innerHTML='';c<=a;){const a=document.createElement('tr');for(let c=1;c<=b;c++){const b=document.createElement('td');a.appendChild(b)}pixelCanvas.appendChild(a),c++}grid.selectCell()},selectCell:()=>{for(let a=0;a<cells.length;a++)cells[a].addEventListener('click',(a)=>{grid.changeColor(a.target)})},changeColor:(a)=>{if(!0===erase.classList.contains('active'))a.style.backgroundColor='';else{const b=document.getElementById('color-picker');a.style.backgroundColor=b.value}},drawRulers:()=>{!0===grid.rulers?(pixelCanvas.classList.remove('rulers-on'),pixelCanvas.className+=' rulers-off',grid.rulers=!1):(pixelCanvas.classList.remove('rulers-off'),pixelCanvas.className+=' rulers-on',grid.rulers=!0)},clearGrid:()=>{for(let a=0;a<cells.length;a++)cells[a].style.backgroundColor=''}};window.onload=()=>{grid.makeGrid(grid.h,grid.w)},document.getElementById('input-submit').addEventListener('click',(a)=>{grid.h=height.value,grid.w=width.value,a.preventDefault(),testGrid(grid.h,grid.w)});function testGrid(a,b){const c=document.querySelector('.controls-wrapper').offsetWidth,d=document.querySelector('.canvas-wrapper').offsetHeight,e=window.innerWidth;let f=countCellsY(d),g=countCellsX(e,c);a>f||b>g?(updateModalMessage(g,f),toggleModal(modal)):0>=a||0>=b?(updateModalMessage(0,0),toggleModal(modal)):grid.makeGrid(grid.h,grid.w)}let countCellsY=(a)=>Math.floor(a/20),countCellsX=(a,b)=>Math.floor((a-b)/20),updateModalMessage=(a,b)=>{let c=document.getElementById('close-modal'),d=document.createElement('p'),e=createMessage(a,b);d.setAttribute('id','modal-message'),d.appendChild(e),modalAlert.insertBefore(d,c)},createMessage=(a,b)=>a&&0<b?document.createTextNode('For better experience grid shouldn\'t be bigger than '+b+' columns height and '+a+' columns width.'):document.createTextNode('To create grid enter value greater than 0');document.getElementById('close-modal').addEventListener('click',()=>{let a=document.getElementById('modal-message');modalAlert.removeChild(a),toggleModal(modal)});function toggleModal(a){isNotVisible(a)?a.className+=' modal-active':a.classList.remove('modal-active')}let isNotVisible=(a)=>0==a.offsetWidth&&0==a.offsetHeight;document.getElementById('button-clear').addEventListener('click',(a)=>{a.preventDefault(),grid.clearGrid()}),erase.addEventListener('click',(a)=>{a.target.classList.toggle('not-active'),a.target.classList.toggle('active')}),document.getElementById('hide-grid').addEventListener('click',()=>{grid.drawRulers()}),document.getElementById('reset-grid').addEventListener('click',()=>{grid.makeGrid(10,10)});